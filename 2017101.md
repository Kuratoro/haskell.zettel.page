---
title: Type safe static assets
tags:
  - nix
  - reflex/obelisk
---

Referencing static assets in your web application is an error prone-process that the compiler can help type-check. [2012403](zcf:) does this with the help of <2017102?cf>, `TemplateHaskell` and `TypeApplications`. 

The [frontend code](https://github.com/obsidiansystems/obelisk/blob/d9df151ed175be4f2dff721676e412a88a0596c1/skeleton/frontend/src/Frontend.hs#L30) would look like this:

```haskell
import Obelisk.Generated.Static  -- Generated by Nix
elAttr "link" ("href" =: static @"main.css" <> "type" =: "text/css") blank
```

The `static @"main.css"` is guaranteed to compile only if you have the associated file in the project directory. 

To see how this works, look at the [the Nix part](https://github.com/obsidiansystems/obelisk/blob/d9df151ed175be4f2dff721676e412a88a0596c1/default.nix#L64-L74) which uses [obelisk-asset-manifest](https://github.com/obsidiansystems/obelisk/tree/master/lib/asset/manifest) to generate that module (during `nix-shell` or `nix-build`).
